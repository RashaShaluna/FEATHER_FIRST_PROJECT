<%- include('../layouts/header') %>
<style>
    #address{
        height: 70px;
    }
</style>
<body>
<main class="main">
    <%- include('../layouts/topbarprofile') %>
            <div class="page-content">
            	<div class="dashboard">
	                <div class="container">
	                	<div class="row">
                            <%- include('../layouts/sidebarprofile') %>
	                		<div class="col-md-8 col-lg-9">
                                <form id="editAddressForm" action="/editaddress/<%= address._id %>" method="POST">
                                    <h3>Edit Address</h3>                                  
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <label for="name">Name*</label>
                                            <input type="text" name="name" id="name" class="form-control" value="<%= address.name %>">
                                            <div id="error1" class="error-message"></div>

                                          </div>
                                        <div class="col-sm-6">
                                            <label for="phone">Phone Number*</label>
                                            <input type="text" name="phone" id="phone" class="form-control" value="<%= address.phone %>">
                                            <div id="error2" class="error-message"></div>
                                          </div>
                                    </div>                                   
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <label for="locality">Locality*</label>
                                            <input type="text" name="locality" id="locality" class="form-control" value="<%= address.locality %>">
                                            <div id="error3" class="error-message"></div>
                                          </div>
                                        <div class="col-sm-6">
                                            <label for="district">District*</label>
                                            <input type="text" name="district" id="district" class="form-control" value="<%= address.district %>">
                                            <div id="error4" class="error-message"></div>
                                          </div>
                                    </div>
                                    <div class="row ">
                                        <div class="col-sm-12 ">
                                            <label for="address">Address*</label>
                                            <input type="text" name="address" id="address" class="form-control" value="<%= address.address %>">
                                            <div id="error5" class="error-message"></div>
                                          </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <label for="state">State*</label>
                                            <select name="state" id="state" class="form-control">
                                                <option value="">Select State</option>
                                                <option value="Andhra Pradesh" <%= address.state === 'Andhra Pradesh' ? 'selected' : '' %>>Andhra Pradesh</option>
                                                <option value="Arunachal Pradesh" <%= address.state === 'Arunachal Pradesh' ? 'selected' : '' %>>Arunachal Pradesh</option>
                                                <option value="Assam" <%= address.state === 'Assam' ? 'selected' : '' %>>Assam</option>
                                                <option value="Bihar" <%= address.state === 'Bihar' ? 'selected' : '' %>>Bihar</option>
                                                <option value="Chhattisgarh" <%= address.state === 'Chhattisgarh' ? 'selected' : '' %>>Chhattisgarh</option>
                                                <option value="Goa" <%= address.state === 'Goa' ? 'selected' : '' %>>Goa</option>
                                                <option value="Gujarat" <%= address.state === 'Gujarat' ? 'selected' : '' %>>Gujarat</option>
                                                <option value="Haryana" <%= address.state === 'Haryana' ? 'selected' : '' %>>Haryana</option>
                                                <option value="Himachal Pradesh" <%= address.state === 'Himachal Pradesh' ? 'selected' : '' %>>Himachal Pradesh</option>
                                                <option value="Jharkhand" <%= address.state === 'Jharkhand' ? 'selected' : '' %>>Jharkhand</option>
                                                <option value="Karnataka" <%= address.state === 'Karnataka' ? 'selected' : '' %>>Karnataka</option>
                                                <option value="Kerala" <%= address.state === 'Kerala' ? 'selected' : '' %>>Kerala</option>
                                                <option value="Madhya Pradesh" <%= address.state === 'Madhya Pradesh' ? 'selected' : '' %>>Madhya Pradesh</option>
                                                <option value="Maharashtra" <%= address.state === 'Maharashtra' ? 'selected' : '' %>>Maharashtra</option>
                                                <option value="Manipur" <%= address.state === 'Manipur' ? 'selected' : '' %>>Manipur</option>
                                                <option value="Meghalaya" <%= address.state === 'Meghalaya' ? 'selected' : '' %>>Meghalaya</option>
                                                <option value="Mizoram" <%= address.state === 'Mizoram' ? 'selected' : '' %>>Mizoram</option>
                                                <option value="Nagaland" <%= address.state === 'Nagaland' ? 'selected' : '' %>>Nagaland</option>
                                                <option value="Odisha" <%= address.state === 'Odisha' ? 'selected' : '' %>>Odisha</option>
                                                <option value="Punjab" <%= address.state === 'Punjab' ? 'selected' : '' %>>Punjab</option>
                                                <option value="Rajasthan" <%= address.state === 'Rajasthan' ? 'selected' : '' %>>Rajasthan</option>
                                                <option value="Sikkim" <%= address.state === 'Sikkim' ? 'selected' : '' %>>Sikkim</option>
                                                <option value="Tamil Nadu" <%= address.state === 'Tamil Nadu' ? 'selected' : '' %>>Tamil Nadu</option>
                                                <option value="Telangana" <%= address.state === 'Telangana' ? 'selected' : '' %>>Telangana</option>
                                                <option value="Tripura" <%= address.state === 'Tripura' ? 'selected' : '' %>>Tripura</option>
                                                <option value="Uttar Pradesh" <%= address.state === 'Uttar Pradesh' ? 'selected' : '' %>>Uttar Pradesh</option>
                                                <option value="Uttarakhand" <%= address.state === 'Uttarakhand' ? 'selected' : '' %>>Uttarakhand</option>
                                                <option value="West Bengal" <%= address.state === 'West Bengal' ? 'selected' : '' %>>West Bengal</option>
                                            </select>
                                            <div id="error6" class="error-message"></div>
                                          </div>
                                          <div class="col-sm-6">
                                            <label for="pincode">Pincode*</label>
                                            <input type="text" name="pincode" id="pincode" class="form-control" value="<%= address.pincode %>">
                                            <div id="error7" class="error-message"></div>
                                          </div>
                                   </div>
                                    <div class="row">                                     
                                        <div class="col-sm-6">
                                            <label for="alternate_phone">Alternate Phone Number*</label>
                                            <input type="text" name="alternatePhone" id="alternate_phone" class="form-control" value="<%= address.alternatePhone %>">
                                            <div id="error8" class="error-message"></div>
                                          </div>
                                          <div class="col-sm-6">
                                            <label for="landmark">Landmark*</label>
                                            <input type="text" name="landmark" id="landmark" class="form-control" value="<%= address.landmark %>">
                                            <div id="error9" class="error-message"></div>
                                          </div>
                                    </div>                            
                                    <div class="row mt-2">
                                      <div class="col-sm-12">
                                          <button type="submit" class="btn btn-outline-primary-2" >
                                              <span>EDIT ADDRESS</span>
                                              <i class="icon-long-arrow-right"></i>
                                          </button>
                                      </div>
                                    </div>
                                </form>
        	         </div><!-- .End .tab-pane -->
                    </div>
                </div><!-- End .col-lg-9 -->
            </div><!-- End .row -->
        </div><!-- End .container -->
    </div><!-- End .dashboard -->
</div><!-- End .page-content -->
</main><!-- End .main -->

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('editAddressForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const name = document.getElementById('name');
            const phone = document.getElementById('phone');
            const locality = document.getElementById('locality');
            const district = document.getElementById('district');
            const address = document.getElementById('address');
            const state = document.getElementById('state');
            const pincode = document.getElementById('pincode');
            const alternatePhone = document.getElementById('alternate_phone');
            const landmark = document.getElementById('landmark');

            const error1 = document.getElementById('error1');
            const error2 = document.getElementById('error2');
            const error3 = document.getElementById('error3');
            const error4 = document.getElementById('error4');
            const error5 = document.getElementById('error5');
            const error6 = document.getElementById('error6');
            const error7 = document.getElementById('error7');
            const error8 = document.getElementById('error8');
            const error9 = document.getElementById('error9');

            document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');

            let isValid = true;

            if (name.value.trim() === '') {
                error1.textContent = 'Name is required.';
                error1.style.display = 'block';
                isValid = false;
            }

            if (phone.value.trim() === '') {
                error2.textContent = 'Phone number is required.';
                error2.style.display = 'block';
                isValid = false;
            }

            if (locality.value.trim() === '') {
                error3.textContent = 'Locality is required.';
                error3.style.display = 'block';
                isValid = false;
            }

            if (district.value.trim() === '') {
                error4.textContent = 'District is required.';
                error4.style.display = 'block';
                isValid = false;
            }

            if (address.value.trim() === '') {
                error5.textContent = 'Address is required.';
                error5.style.display = 'block';
                isValid = false;
            }

            if (state.value === '') {
                error6.textContent = 'State is required.';
                error6.style.display = 'block';
                isValid = false;
            }

            if (pincode.value.trim() === '') {
                error7.textContent = 'Pincode is required.';
                error7.style.display = 'block';
                isValid = false;
            }

            if (alternatePhone.value.trim() === '') {
                error8.textContent = 'Alternate phone number is required.';
                error8.style.display = 'block';
                isValid = false;
            }

            // if (landmark.value.trim() === '') {
            //     error9.textContent = 'Landmark is required.';
            //     error9.style.display = 'block';
            //     isValid = false;
            // }

            if (isValid) {
                event.target.submit(); 
            }
        });
    });
</script>
<%- include('../layouts/footer') %>
</body>

